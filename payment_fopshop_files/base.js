// Core9 - Module: fopshop-base-theme
!function(a){"function"==typeof define&&define.amd?define(a):window.Core9=a()}(function(){function a(){var a=document.createElement("input");return a.type="checkbox",a.className="copy",a.id="copybox",a}var b=window.Core9||{};return b.CheckoutHelper=b.CheckoutHelper||function(){this.billing=document.getElementById("billingaddress"),this.shipping=document.getElementById("shippingaddress"),this.listeners=[],this.copyCheckbox=a(),this.bindCheckboxEvents(),this.addCopyCheckbox(),this.trigger()},b.CheckoutHelper.prototype={trigger:function(){this.copyCheckbox.checked=!0;var a=new Event("change");this.copyCheckbox.dispatchEvent(a)},getCopyEventHandler:function(a){return function(){var b=a.billing.getElementsByTagName("input"),c=a.billing.getElementsByTagName("select");if(this.checked){for(var d=a.shipping.getElementsByTagName("input"),e=a.shipping.getElementsByTagName("select"),f=b.length-1;f>=0;f--)d[f+1].value=b[f].value,a.bindCopyEvent(f,"change",b[f],d[f+1]);for(f=c.length-1;f>=0;f--)e[f].value=c[f].value,a.bindCopyEvent(f+b.length,"change",c[f],e[f]);a.hideShipping()}else{for(var g=b.length-1;g>=0;g--)a.unbindCopyEvent(g,"change",b[g]);for(g=c.length-1;g>=0;g--)a.unbindCopyEvent(g+b.length,"change",c[g]);a.showShipping()}}},hideShipping:function(){for(var a=this.shipping.getElementsByTagName("input"),b=a.length-1;b>=0;b--)"copy"!==a[b].className&&(a[b].style.display="none");for(a=this.shipping.getElementsByTagName("label"),b=a.length-1;b>=0;b--)"copy"!==a[b].className&&(a[b].style.display="none");for(a=this.shipping.getElementsByTagName("select"),b=a.length-1;b>=0;b--)"copy"!==a[b].className&&(a[b].style.display="none")},showShipping:function(){for(var a=this.shipping.getElementsByTagName("input"),b=a.length-1;b>=0;b--)"copy"!==a[b].className&&(a[b].style.display="block");for(a=this.shipping.getElementsByTagName("label"),b=a.length-1;b>=0;b--)"copy"!==a[b].className&&(a[b].style.display="block");for(a=this.shipping.getElementsByTagName("select"),b=a.length-1;b>=0;b--)"copy"!==a[b].className&&(a[b].style.display="block")},unbindCopyEvent:function(a,b,c){c.removeEventListener(b,this.listeners[a])},bindCopyEvent:function(a,b,c,d){this.listeners[a]=function(){d.value=this.value},c.addEventListener(b,this.listeners[a])},bindCheckboxEvents:function(){this.copyCheckbox.addEventListener("change",this.getCopyEventHandler(this))},addCopyCheckbox:function(){var a=this.shipping.getElementsByTagName("legend")[0],b=document.createElement("label");b.innerHTML="Kopi&euml;er van factuurgegevens",b.className="copy",b.setAttribute("for","copybox");var c=document.createElement("div");c.className="inline",c.appendChild(this.copyCheckbox),c.appendChild(b),a.parentNode.insertBefore(c,a.nextSibling)}},b}),function(a){"function"==typeof define&&define.amd?define(a):window.Core9=a()}(function(){var a=window.Core9||{};return a.Fader=a.Fader||function(a,b,c){this.element=document.getElementById(a),this.items=this.element.getElementsByTagName("li"),this.duration=b,this.showtime=c,this.startFade()},a.Fader.prototype={startFade:function(){var a=0,b=1,c=this.items.length,d=this;setInterval(function(){d.fadeOut(d.items[a]),d.fadeIn(d.items[b]),a=b,b=(b+1)%c},this.duration+this.showtime)},fadeOut:function(a){var b=1,c=setInterval(function(){0>=b&&clearInterval(c),a.style.opacity=b,a.style.filter="alpha(opacity="+100*b+")",b-=.05},this.duration/20)},fadeIn:function(a){var b=0,c=setInterval(function(){b>=1&&clearInterval(c),a.style.opacity=b,a.style.filter="alpha(opacity="+100*b+")",b+=.05},this.duration/20)}},a}),function(a){"function"==typeof define&&define.amd?define(a):window.Core9=a()}(function(){"use strict";function a(){f(n.selector),s&&(s=!1,n.container&&j(n.container,function(a){h(a,"scroll",t)}),h(window,"resize",u),h(window,"resize",t),h(window,"scroll",t)),b()}function b(){for(var a=q.length;--a&&-1!==a;){var b=q[a];(d(b)||e(b))&&(l.LazyLoad.prototype.load(b),q.splice(a,1))}-1===a&&l.LazyLoad.prototype.destroy()}function c(a){var b=a.getAttribute("src"),c=a.getAttribute(m)||a.getAttribute(n.src);if(c){var d=c.split(n.separator),e=d[r&&d.length>1?1:0];if(j(n.breakpoints,function(b){a.removeAttribute(b.src)}),a.removeAttribute(n.src),"none"===e)return;null!==b&&b.indexOf("p=")>-1&&(e=b.replace(/p=.*$/,"p="+e));var f=new Image;f.onerror=function(){n.error&&n.error(a,"invalid"),a.className=a.className+" "+n.errorClass},f.onload=function(){"img"===a.nodeName.toLowerCase()?a.src=e:a.style.backgroundImage='url("'+e+'")',a.className=a.className+" "+n.successClass,n.success&&n.success(a)},f.src=e}else n.error&&n.error(a,"missing"),a.className=a.className+" "+n.errorClass}function d(a){var b=a.getBoundingClientRect(),c=p+n.offset;return b.left>=0&&b.right<=o+n.offset&&(b.top>=0&&b.top<=c||b.bottom<=c&&b.bottom>=0-n.offset)}function e(a){return-1!==(" "+a.className+" ").indexOf(" "+n.successClass+" ")}function f(a){for(var b=document.querySelectorAll(a),c=0,d=q.length=b.length;d>c;c++)q[d-c]=b[c]}function g(){p=window.innerHeight||document.documentElement.clientHeight,o=window.innerWidth||document.documentElement.clientWidth}function h(a,b,c){a.attachEvent?a.attachEvent("on"+b,c):a.addEventListener(b,c,!1)}function i(a,b,c){a.detachEvent?a.detachEvent("on"+b,c):a.removeEventListener(b,c,!1)}function j(a,b){if(a&&b)for(var c=a.length,d=0;c>d&&b(a[d],d)!==!1;d++);}function k(a,b){var c=0;return function(){var d=+new Date;b>d-c||(c=d,a.apply(q,arguments))}}var l=window.Core9||{};l.AsyncLoader=l.AsyncLoader||function(){},l.AsyncLoader.prototype={loadCSS:function(a,b,c){function d(){for(var b,f=0;f<g.length;f++)g[f].href&&g[f].href.indexOf(a)>-1&&(b=!0);b?e.media=c||"all":setTimeout(d)}var e=window.document.createElement("link"),f=b||window.document.getElementsByTagName("script")[0],g=window.document.styleSheets;return e.rel="stylesheet",e.href=a,e.media="only x",f.parentNode.insertBefore(e,f),d(),e}};var m,n,o,p,q,r,s,t,u;return l.LazyLoad=l.LazyLoad||function(c){s=!0,q=[],n=c||{},n.error=n.error||!1,n.offset=n.offset||100,n.success=n.success||!1,n.selector=n.selector||".lazy",n.separator=n.separator||"|",n.container=n.container?document.querySelectorAll(n.container):!1,n.errorClass=n.errorClass||"error",n.breakpoints=n.breakpoints||!1,n.successClass=n.successClass||"loaded",n.src=m=n.src||"data-profile",r=window.devicePixelRatio>1,t=k(b,25),u=k(g,50),g(),j(n.breakpoints,function(a){return a.width>=window.innerWidth?(m=a.src,!1):void 0}),a()},l.LazyLoad.prototype={revalidate:function(){a()},load:function(a){e(a)||c(a)},destroy:function(){n.container&&j(n.container,function(a){i(a,"scroll",t)}),i(window,"scroll",t),i(window,"resize",t),i(window,"resize",u),q.length=0,s=!0}},l}),function(a){"function"==typeof define&&define.amd?define(a):window.Core9=a()}(function(){var a=window.Core9||{};return a.toggleClass=a.toggleClass||function(a,b){if(a&&b){var c=a.className,d=c.indexOf(b);-1==d?c+=" "+b:c=c.substr(0,d)+c.substr(d+b.length),a.className=c}},a.DropdownMenu=a.DropdownMenu||function(a){this.instance=a,this.bind(),this.setCurrentlyActive()},a.DropdownMenu.prototype={constructor:a.DropdownMenu,bind:function(){for(var a=this.instance.getElementsByClassName("dropdown"),b=a.length-1;b>=0;b--)a[b].children[0].addEventListener("click",this.clickHandler(a[b]))},setCurrentlyActive:function(){for(var b=this.instance.getElementsByTagName("a"),c=b.length-1;c>=0;c--){var d=document.URL.split("?")[0].split("#")[0];if(b[c].href===d)return a.toggleClass(b[c],"active"),void this.setParentDropdownOpened(b[c])}},setParentDropdownOpened:function(b){for(;(b=b.parentElement)&&"nav"!==b.tagName.toLowerCase();)"li"===b.tagName.toLowerCase()&&a.toggleClass(b,"menu-open")},clickHandler:function(b){return function(c){c.preventDefault(),a.toggleClass(b,"menu-open")}}},a.Toggler=a.Toggler||function(a,b,c){this.instance=document.getElementById(a),this.toggleButton=document.getElementById(b),this.classToToggle=c,this.bind(this.toggleButton)},a.Toggler.prototype={bind:function(a){a.onclick=this.clickHandler(this)},clickHandler:function(b){return function(c){a.toggleClass(b.instance,b.classToToggle)}}},a.Sidebar=a.Sidebar||function(b,c){this.instance=document.getElementById(b);for(var d=this.instance.getElementsByTagName("nav"),e=d.length-1;e>=0;e--)d[e]=new a.DropdownMenu(d[e]);this.main=document.getElementsByTagName("main")[0],this.toggleButton=document.getElementById(c),this.bind(this.toggleButton)},a.Sidebar.prototype={constructor:a.Sidebar,show:function(){this.instance.style.display="block",a.toggleClass(this.main,"sidebar-shown"),a.toggleClass(this.toggleButton,"sidebar-shown"),this.main.onclick=this.clickHandler(this)},hide:function(){this.instance.style.display="none",a.toggleClass(this.main,"sidebar-shown"),a.toggleClass(this.toggleButton,"sidebar-shown"),this.main.onclick=null},toggle:function(){0===this.instance.offsetWidth&&0===this.instance.offsetHeight?this.show():this.hide()},clickHandler:function(a){return function(b){a.toggle()}},bind:function(a){a.onclick=this.clickHandler(this)}},a}),function(a){"function"==typeof define&&define.amd?define(a):window.Core9=a()}(function(){function a(a,b){var c;return b.length>a.length&&(c=b,b=a,a=c),a.filter(function(a){return-1!==b.indexOf(a)?!0:void 0})}var b=window.Core9||{};b.ImageSwitcher=b.ImageSwitcher||function(a,b){this.selectorClass=b,this.mainLink=document.getElementById(a),this.mainImage=this.mainLink.getElementsByTagName("img")[0],null!=this.mainImage&&(this.profile=this.mainImage.getAttribute("data-profile"),this.bind())};var c=function(a,b){return function(c){c.preventDefault(),a.mainLink.setAttribute("href",b.getAttribute("href")),a.mainImage.setAttribute("src",b.getAttribute("href")+"?p="+a.profile)}};b.ImageSwitcher.prototype={bind:function(){for(var a=document.getElementsByClassName(this.selectorClass),b=a.length-1;b>=0;b--)a[b].addEventListener("click",c(this,a[b]))}},b.ProductSelector=b.ProductSelector||function(a,b,c){this.selectionElement=document.getElementById(a),this.itemIdPrefix=b,this.options={},this.products={},this.currentlyViewing=null,this.parseProducts(c),this.initialize()};var d=function(b){var c=null;for(var d in b.options){var e=b.options[d][d+"-elem"].value;c=null===c?b.options[d][e]:a(c,b.options[d][e])}return c},e=function(a){var b=null;for(var c in a.options){var d=a.options[c][c+"-elem"].value;b=null===b?a.options[c][d]:b.concat(a.options[c][d])}return b},f=function(a,b){var c=document.createElement("article");if(c.className="product-item",0===b.length)c.innerHTML="<h2>Niet beschikbaar</h2>",c.innerHTML+="<p>De geselecteerde combinatie momenteel helaas niet beschikbaar</p>";else{c.innerHTML="<h2>Meerdere producten</h2>",c.innerHTML+="<p>We hebben meerdere artikelen gevonden, maak uw keuze:</p>";for(var d=b.length-1;d>=0;d--){if(a.currentlyViewing===a.products[b[d]]){var e=document.createElement("article");a.setCurrentlyViewedProduct(e)}c.appendChild(a.products[b[d]])}}return c},g=function(a,b){return function(){available=d(a),0===available.length&&(available=e(a)),1===available.length?a.setCurrentlyViewedProduct(a.products[available[0]]):a.setCurrentlyViewedProduct(f(a,available))}};b.ProductSelector.prototype={initialize:function(){this.showSelectors(),this.getInitialSelection()()},getInitialSelection:function(){for(var a in this.options)return g(this,a);var b=function(a,b){return function(){a.setCurrentlyViewedProduct(a.products[b])}};for(var c in this.products)return b(this,c)},parseProducts:function(a){for(var b=a.length-1;b>=0;b--)this.parseProductOptions(a[b]),this.products[a[b].itemid]=document.getElementById(this.itemIdPrefix+a[b].itemid)},parseProductOptions:function(a){for(var b=a.options.length-1;b>=0;b--){var c=a.options[b];void 0===this.options[c.type]&&(this.options[c.type]={}),void 0===this.options[c.type][c.value]&&(this.options[c.type][c.value]=[]),this.options[c.type][c.value].push(a.itemid)}},showSelectors:function(){for(;this.selectionElement.firstChild;)this.selectionElement.removeChild(this.selectionElement.firstChild);this.selectionElement.className+=" loaded";for(var a in this.options)this.selectionElement.appendChild(this.getSelectLabel(a)),this.selectionElement.appendChild(this.getSelectBox(a))},getSelectLabel:function(a){var b=document.createElement("label");return b.setAttribute("for","selector-"+a.toLowerCase()),b.innerHTML=a,b},getSelectBox:function(a){var b=document.createElement("select");b.id="selector-"+a.toLowerCase();for(var c in this.options[a]){var d=document.createElement("option");d.text=c,d.value=c,b.add(d,0)}return this.options[a][a+"-elem"]=b,b.addEventListener("change",g(this,a)),b},setCurrentlyViewedProduct:function(a){null==this.currentlyViewing?this.selectionElement.appendChild(a):this.selectionElement.replaceChild(a,this.currentlyViewing),this.currentlyViewing=a}},b.ProductTracker=b.ProductTracker||function(a,c){this.analyticsObject=window[a],this.products=b[c]};var h=function(a,b,c,d){return function(e){a.loaded&&(e.preventDefault(),a("ec:addProduct",b),a("ec:setAction","click",{list:c}),a("send","event","UX","click","Resuls",{hitCallback:function(){console.log(b),console.log(c),document.location=d}}))}};return b.ProductTracker.prototype={addClickSelectors:function(a,b){for(var c=a.length-1;c>=0;c--)this.bindClickElements(document.querySelectorAll(a[c]),b)},bindClickElements:function(a,b){for(var c=a.length-1;c>=0;c--)product=this.products[a[c].dataset.productid],continuelink=a[c].dataset.link,a[c].addEventListener("click",h(this.analyticsObject,product,b,continuelink))},addAddToCartForm:function(a){this.bindAddCartFormElements(document.querySelectorAll(a))},addChangeCartForm:function(a){this.bindChangeCartFormElements(document.querySelectorAll(a))},bindAddCartFormElements:function(a){for(var b=a.length-1;b>=0;b--)this.addAddToCartHandler(a[b])},bindChangeCartFormElements:function(a){for(var b=a.length-1;b>=0;b--)this.addChangeCartHandler(a[b])},addAddToCartHandler:function(a){var b=this.analyticsObject,c=this.products,d=function(e){b.loaded&&(e.preventDefault(),product=c[a.dataset.productid],product.variant=document.querySelector("[name='cart[_id]']").value,product.price=document.querySelector("[name='cart[price]']").value,product.quantity=document.querySelector("[name='cart[quantity]']").value,b("ec:addProduct",product),b("ec:setAction","add"),b("send","event","UX","click","add to cart",{hitCallback:function(){a.removeEventListener("submit",d),a.submit()}}))};a.addEventListener("submit",d)},addChangeCartHandler:function(a){var b=this.analyticsObject,c=function(d){if(b.loaded){if(d.preventDefault(),quantity=a["cart[quantity]"],initialQuantity=parseInt(a.dataset.quantity),void 0===quantity)b("ec:setAction","remove"),quantity=initialQuantity;else{if(quantity=parseInt(quantity.value),quantity==initialQuantity)return!1;quantity>initialQuantity?(b("ec:setAction","add"),quantity-=initialQuantity):(b("ec:setAction","remove"),quantity=initialQuantity-quantity)}product={id:a.dataset.link.match(/\d+$/)[0],name:a.dataset.title,variant:a.dataset.itemid,quantity:quantity},b("ec:addProduct",product),b("send","event","UX","click","add to cart",{hitCallback:function(){a.removeEventListener("submit",c),a.submit()}})}};a.addEventListener("submit",c)}},b}),function(a){"function"==typeof define&&define.amd?define(a):window.Core9=a()}(function(){var a=window.Core9||{};return a.UrlRewriter=a.UrlRewriter||function(a){this.path=a;for(var b=document.getElementsByTagName("a"),c=b.length-1;c>=0;c--)this.rewriteAnchor(b[c].getAttribute("href"),b[c]);for(b=document.getElementsByTagName("form"),c=b.length-1;c>=0;c--)this.rewriteForm(b[c].getAttribute("action"),b[c])},a.UrlRewriter.prototype={rewriteAnchor:function(a,b){void 0!==a&&null!==a&&0===a.indexOf("/")&&(b.href=this.path+a)},rewriteForm:function(a,b){void 0!==a&&null!==a&&0===a.indexOf("/")&&(b.action=this.path+a)}},a}),function(a){"function"==typeof define&&define.amd?define(a):window.Core9=a()}(function(){var a=window.Core9||{};return a.Builder=a.Builder||function(a,b){this.doclib=a,this.queued=b},a.Builder.prototype={init:function(){for(var b=0,c=this.queued.length;c>b;b++){var d=this.queued[b].shift();this.queued[b].length>0&&"[object Array]"===Object.prototype.toString.call(this.queued[b][0])?void 0===this.doclib[d]?console.log("ERROR: the class '"+d+"'' isn't initialized yet"):this.callMethod(d,this.queued[b]):this.doclib[d]=this.construct(a[d],this.queued[b])}this.queued.length=0},callMethod:function(a,b){var c=b[0].shift();this.doclib[a][c].apply(this.doclib[a],b[0])},construct:function(a,b){function c(){return a.apply(this,b)}return c.prototype=a.prototype,new c}},a}),function(a,b,c){b[c]=b[c]||{},a[c].queued.push(["LazyLoad",{breakpoints:[{width:320,src:"data-profile-xs"},{width:786,src:"data-profile-s"},{width:960,src:"data-profile"}]}]),a[c].queued.push(["Sidebar","sidebar","toggleSidebar"]),new a.Core9.Builder(b[c],a[c].queued).init()}(window,document,"Core9"),function(a,b,c){"use strict";function d(a,b){var c=this;c.m_Elements=a,c.m_UserOptions=b||{},c.m_Options={},c.m_CurrentTargetElements=g,c.m_CurrentTargetElementsLength=g,c.m_CurrentTargetNumber=g,c.m_CurrentImageElement=g,c.m_InProgress=g,c.m_InstalledImageBox=g,c.m_Alt=g,c.m_AnimateDone=g;(function(){for(var a in d.options)c.m_UserOptions.hasOwnProperty(a)?c.m_Options[a]=c.m_UserOptions[a]:c.m_Options[a]=d.options[a]})()}var e=b.documentElement,f=b.getElementsByTagName("body")[0],g=!1,h="attachEvent",i="addEventListener",j=i in b;d.prototype={init:function(){var a=this;a.API_AddEvent=a.addEvent,a.API_RemoveImageElement=a.removeImageElement,a.checkBrowser(),a.addEvents()},checkBrowser:function(){var b=this,c="ontouchstart"in a||a.navigator.msMaxTouchPoints||navigator.maxTouchPoints||g,d=c&&(a.navigator.pointerEnabled||a.navigator.msPointerEnabled);b.browser={isHardwareAccelerated:"undefined"!==b.getcss3prop("transition")?!0:g,isTouch:c,hasPointers:d}},addEvents:function(){for(var b=this,c=0;c<b.m_Elements.length;c++)!function(c){b.addEvent(b.m_Elements[c],b.browser.hasPointers?"pointerup MSPointerUp":"click",function(d){d.preventDefault&&(d.preventDefault(),d.stopPropagation()),a.event&&(a.event.returnValue=g,a.event.cancelBubble=g),b.isFunction(b.m_Options.onStart())&&b.m_Options.onStart(this),b.m_CurrentTargetElements=b.m_Elements,b.m_CurrentTargetElementsLength=b.m_Elements.length,b.m_CurrentTargetNumber=c,b.openImage(b.m_Elements[b.m_CurrentTargetNumber])})}(c);b.addEvent(a,"resize",function(){b.calculateImagePositionAndSize(b.m_CurrentImageElement,!0)})},openImage:function(c,d){var e=this,h=b.createDocumentFragment(),i=b.createElement("img"),j=b.getElementById(e.m_Options.imageElementId);if(c&&"a"===c.tagName.toLowerCase()){if(j&&(f.removeChild(j),e.m_CurrentImageElement=g,e.m_InstalledImageBox=g),e.m_Alt=c.firstChild.getAttribute("alt"),e.m_InProgress=!0,e.isFunction(e.m_Options.onImageLoadStart())&&e.m_Options.onImageLoadStart(),"undefined"!=typeof d)switch(d){case"left":d=-1;break;case"right":d=1}if(i.setAttribute("id",e.m_Options.imageElementId),i.setAttribute("src",c.getAttribute("href")),i.setAttribute("alt",e.m_Alt),i.setAttribute("style","position: fixed; cursor: pointer; opacity: 0;"),h.appendChild(i),f.appendChild(h),e.m_CurrentImageElement=b.getElementById(e.m_Options.imageElementId),e.m_CurrentImageElement.style.filter="alpha(opacity=0)",e.browser.isHardwareAccelerated&&("undefined"!=typeof d&&(e.m_CurrentImageElement.style[e.getcss3prop("transform")]="translateX("+d*e.m_Options.fadeInDistance+"px)"),e.m_CurrentImageElement.style[e.getcss3prop("transition")]="all "+e.m_Options.animationSpeed+"ms ease"),e.calculateImagePositionAndSize(e.m_CurrentImageElement,g,d),e.m_Options.quitOnImageClick&&e.addEvent(e.m_CurrentImageElement,"click",function(b){b.preventDefault&&b.preventDefault(),a.event&&(a.event.returnValue=g),e.removeImageElement()}),e.browser.isTouch){var k=-1,l=-1,m=0;e.addEvent(e.m_CurrentImageElement,"touchstart pointerdown MSPointerDown",function(a){a.preventDefault(),k=a.pageX||a.touches[0].pageX}),e.addEvent(e.m_CurrentImageElement,"touchmove pointermove MSPointerMove",function(a){a.preventDefault(),l=a.pageX||a.touches[0].pageX,m=k-l,e.browser.isHardwareAccelerated&&(e.m_CurrentImageElement.style[e.getcss3prop("transition")]="none",e.m_CurrentImageElement.style[e.getcss3prop("transform")]="translateX("+-m+"px)")}),e.addEvent(e.m_CurrentImageElement,"touchend pointerup pointercancel MSPointerUp MSPointerCancel",function(a){a.preventDefault(),Math.abs(m)>75?0>m?e.leftAnimationFunction():e.rightAnimationFunction():e.m_CurrentImageElement.style[e.getcss3prop("transform")]="translateX(0px)"})}}},calculateImagePositionAndSize:function(b,c){var d=this,f=new Image,h=0,i=0,j=0;b&&(d.m_ImageSource=b.getAttribute("src"),d.m_ScreenHeight=a.innerHeight||e.offsetHeight,d.m_ScreenWidth=a.innerWidth||e.offsetWidth,f.onload=function(){var a=this.width,e=this.height;h=a,i=e,j=h/i,Math.floor(d.m_ScreenWidth/j)>d.m_ScreenHeight?(h=d.m_ScreenHeight*j*d.m_Options.imageSize,i=d.m_ScreenHeight*d.m_Options.imageSize):(h=d.m_ScreenWidth*d.m_Options.imageSize,i=d.m_ScreenWidth/j*d.m_Options.imageSize),h>a&&(h=a),i>e&&(i=e),b.style.top=(d.m_ScreenHeight-i)/2+"px",b.style.left=(d.m_ScreenWidth-h)/2+"px",b.style.width=Math.floor(h)+"px",b.style.height=Math.floor(i)+"px",c||setTimeout(function(){if(d.browser.isHardwareAccelerated)b.style.opacity=1,b.style[d.getcss3prop("transform")]="translateX(0px)";else{var a=1;d.animate({delay:16,duration:d.m_Options.animationSpeed,delta:d.linear,step:function(c){b.style.opacity=a*c,b.style.filter="alpha(opacity="+a*c*100+")"}})}d.m_InProgress=g,d.m_InstalledImageBox=!0,d.isFunction(d.m_Options.onImageLoadEnd())&&d.m_Options.onImageLoadEnd(b)},100)},f.src=d.m_ImageSource)},removeImageElement:function(){var a=this;if(a.m_CurrentImageElement){if(a.isFunction(a.m_Options.onEnd())&&a.m_Options.onEnd(),a.m_InProgress&&a.isFunction(a.m_Options.onImageLoadEnd())&&a.m_Options.onImageLoadEnd(p_Element),a.browser.isHardwareAccelerated)a.m_CurrentImageElement.style.opacity=0,a.m_CurrentImageElement.style.transition="opacity 250ms ease";else{var b=0;a.animate({delay:16,duration:250,delta:a.linear,step:function(c){a.m_CurrentImageElement.style.opacity=b*c,a.m_CurrentImageElement.style.filter="alpha(opacity="+b*c*100+")"}})}setTimeout(function(){a.m_CurrentImageElement&&a.m_CurrentImageElement.parentNode.removeChild(a.m_CurrentImageElement),a.m_CurrentImageElement=g,a.m_InstalledImageBox=g},a.browser.isHardwareAccelerated?250:350)}},isFunction:function(a){return!!(a&&a.constructor&&a.call&&a.apply)},addEvent:function(c,d,e){var f,k;if(d=d.split(" "),j)if((!c||c instanceof Array&&!c.length||0===c.length)&&c!==a){if(c&&"undefined"!==c[0])for(f=0;f<c.length;f++)for(k=0;k<d.length;k++)c[f][i](d[k],e,g)}else for(f=0;f<d.length;f++)c[i](d[f],e,g);else for(f=0;f<d.length;f++)if(-1!==d[f].indexOf("keydown"))b[h]("on"+d[f],e);else if((!c||c instanceof Array&&!c.length||0===c.length)&&c!==a){if(c&&"undefined"!==c[0])for(k=0;k<c.length;k++)c[k][h](d[f],e)}else c[h]("on"+d[f],e)},animate:function(a){var b=this,c=new Date,d=setInterval(function(){var e=new Date-c,f=e/a.duration;f>1&&(f=1);var g=a.delta(f);a.step(g),1==f&&(b.m_AnimateDone=!0,clearInterval(d))},a.delay||10)},linear:function(a){return a},getcss3prop:function(a){for(var b=["","-moz-","-webkit-","-o-","-ms-","-khtml-"],c=function(a){return a.replace(/\-([a-z])/gi,function(a,b){return b.toUpperCase()})},d=0;d<b.length;d++){var f=c(b[d]+a);if("Ms"==f.substr(0,2)&&(f="m"+f.substr(1)),f in e.style)return f}return"undefined"}},d.options={imageElementId:"simplbox",fadeInDistance:100,animationSpeed:350,imageSize:.8,quitOnImageClick:!0,quitOnDocumentClick:!1,enableKeyboard:!0,onImageLoadStart:function(){},onImageLoadEnd:function(){},onStart:function(){},onEnd:function(){}},a.SimplBox=d}(window,document);var SmplBox=new SimplBox(document.querySelectorAll("a.lightbox"),{onStart:function(){var a=document.createElement("div");a.setAttribute("id","simplbox-overlay"),document.body.appendChild(a),SmplBox.API_AddEvent(a,"click touchend",function(a){return a.preventDefault(),SmplBox.API_RemoveImageElement(),!1})},onEnd:function(){var a=document.getElementById("simplbox-overlay");a.parentNode.removeChild(a)},onImageLoadStart:function(){var a=document.createElement("div"),b=document.createElement("i");b.setAttribute("class","fa fa-spinner fa-spin"),b.setAttribute("style","color: #fff"),a.setAttribute("id","simplbox-loading"),a.appendChild(b),document.body.appendChild(a)},onImageLoadEnd:function(){var a=document.getElementById("simplbox-loading");a.parentNode.removeChild(a)}});SmplBox.init();